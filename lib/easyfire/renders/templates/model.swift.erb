/**********************************************************
 * <%= @class_name_ef %>.swift
 * <%=@description%>
 * Version: <%=@version%>
 * Generated by Easyfire. Do not modify this code 
 **********************************************************/
 
import Foundation
import FirebaseDatabase

class <%= @class_name_ef %> : ModelEF,  Equatable {
    
    var key: String?

    var parentKeys : [String]?  = nil
    var path : String?  = nil
    
    
    <%@attributes.each do |key,value|%>
    //<%=value[:description]%>
    var <%=key%>: <%=type_to_swift_value(value[:type])%>
    <%end%>
    
    required init( <%=@attributes.to_a.map{|e| "#{e[0].to_s}: #{type_to_swift_value(e[1][:type])}"}.join(",\n          ")%> ) {
      
          <%=@attributes.to_a.map{|e| "self.#{e[0].to_s} = #{e[0].to_s}"}.join("\n          ")%>
    
    }
    
    required init( snapshot: DataSnapshot ) {
      
      key = snapshot.key
      let snapshotValue = snapshot.value as! [String: AnyObject]
      
      <%=@attributes.to_a.map{|e| "self.#{e[0].to_s} = snapshotValue[\"#{e[0].to_s}\"] as? #{type_to_swift_value(e[1][:type])} ?? #{swift_default_value(e[1][:type])}" }.join("\n      ")%>
    
    }

    required init( key: String ) {
      
      self.key = key
      <%=@attributes.to_a.map{|e| "self.#{e[0].to_s} = #{swift_default_value(e[1][:type])}" }.join("\n      ")%>
    }
      
    func toAnyObject() -> Any {
      let object : [String : Any] =  [
           <%=@attributes.to_a.map{|e| "\"#{e[0].to_s}\" : #{e[0].to_s} ?? #{swift_default_value(e[1][:type])}" }.join(",\n           ")%>            
        ]
        return object
    }
    
    static func ==(lhs: <%= @class_name_ef %>, rhs: <%= @class_name_ef %>) -> Bool {
        return lhs.key == rhs.key
    }
    
}